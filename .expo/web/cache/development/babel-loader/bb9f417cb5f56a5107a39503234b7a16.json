{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\Users\\\\Felipe\\\\Documents\\\\CCP\\\\Projects\\\\TracknPlay\\\\mobile\\\\src\\\\pages\\\\Search\\\\index.tsx\";\n\nimport React, { useEffect, useState } from 'react';\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport View from \"react-native-web/dist/exports/View\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport { useNavigation } from \"@react-navigation/native\";\nimport { Feather as Icon } from '@expo/vector-icons';\nimport GameInfo from \"../../components/GameInfo\";\nimport Loading from \"../../components/Loading\";\nimport { trackPromise } from 'react-promise-tracker';\nimport api from \"../../services/api\";\nimport Footer from \"../../components/Footer\";\n;\n\nvar Search = function Search() {\n  var navigation = useNavigation();\n\n  var _useState = useState(''),\n      _useState2 = _slicedToArray(_useState, 2),\n      searchString = _useState2[0],\n      setSearchString = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      searchTermChanged = _useState4[0],\n      setSearchTermChanged = _useState4[1];\n\n  var _useState5 = useState([]),\n      _useState6 = _slicedToArray(_useState5, 2),\n      selectedGames = _useState6[0],\n      setSelectedGames = _useState6[1];\n\n  var _useState7 = useState(0),\n      _useState8 = _slicedToArray(_useState7, 2),\n      offset = _useState8[0],\n      setOffset = _useState8[1];\n\n  useEffect(function () {\n    setOffset(0);\n    setSelectedGames([]);\n    var delayDebounceFn = setTimeout(function () {\n      if (searchString != \"\") {\n        setSearchTermChanged(true);\n        trackPromise(api.get(\"/search?title=\" + searchString + \"&offset=\" + offset).then(function (response) {\n          setSelectedGames(response.data);\n        }).catch(function (err) {\n          console.log(err.toString());\n        }));\n      }\n    }, 2000);\n    return function () {\n      return clearTimeout(delayDebounceFn);\n    };\n  }, [searchString]);\n  useEffect(function () {\n    if (searchString != \"\" && offset > 0) {\n      setSearchTermChanged(false);\n      trackPromise(api.get(\"/search?title=\" + searchString + \"&offset=\" + offset).then(function (response) {\n        var tmp = selectedGames;\n        var result = tmp.concat(response.data);\n        setSelectedGames(result);\n      }));\n    }\n  }, [offset]);\n\n  function getMoreGames() {\n    var increment = offset + 10;\n    setOffset(increment);\n  }\n\n  var renderItem = function renderItem(_ref) {\n    var item = _ref.item;\n    return React.createElement(GameInfo, {\n      key: String(item.id),\n      game: item,\n      isSearchPage: true,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 13\n      }\n    });\n  };\n\n  return React.createElement(React.Fragment, null, React.createElement(View, {\n    style: styles.container,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 13\n    }\n  }, React.createElement(Loading, {\n    searchTermChanged: searchTermChanged,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 17\n    }\n  }), React.createElement(View, {\n    style: styles.limitContainer,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 17\n    }\n  }, React.createElement(View, {\n    style: styles.searchContainer,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 21\n    }\n  }, React.createElement(Icon, {\n    name: \"arrow-left\",\n    color: \"#FFF\",\n    size: 24,\n    style: styles.arrowIcon,\n    onPress: function onPress() {\n      return navigation.goBack();\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 25\n    }\n  }), React.createElement(TextInput, {\n    style: styles.searchInput,\n    placeholder: \"Buscar\",\n    placeholderTextColor: \"#fff\",\n    onChangeText: setSearchString,\n    autoCompleteType: \"off\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 25\n    }\n  })), React.createElement(View, {\n    style: styles.gamesContainer,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 21\n    }\n  }, React.createElement(FlatList, {\n    data: selectedGames,\n    renderItem: renderItem,\n    keyExtractor: function keyExtractor(item) {\n      return String(item.id);\n    },\n    onEndReachedThreshold: 0.5,\n    onEndReached: function onEndReached() {\n      getMoreGames();\n    },\n    numColumns: 1,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 25\n    }\n  }))), React.createElement(Footer, {\n    option: \"Search\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 17\n    }\n  })));\n};\n\nexport default Search;\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#000'\n  },\n  searchContainer: {\n    position: \"absolute\",\n    margin: 10,\n    width: 350,\n    height: 50,\n    left: 20,\n    top: 50,\n    backgroundColor: \"#000\",\n    borderColor: \"#696969\",\n    borderRadius: 10,\n    borderWidth: 2\n  },\n  searchInput: {\n    left: 40,\n    top: -12,\n    textAlign: \"left\",\n    color: \"#fff\",\n    fontSize: 18\n  },\n  arrowIcon: {\n    top: 12\n  },\n  gamesContainer: {\n    flexDirection: \"row\",\n    marginTop: 140,\n    left: 10\n  },\n  text: {\n    color: \"#fff\",\n    fontSize: 16,\n    left: 20,\n    paddingBottom: 10\n  },\n  game: {\n    height: 200,\n    width: 800\n  },\n  gameImage: {\n    marginTop: 10,\n    width: 120,\n    height: 170,\n    left: 29\n  },\n  gameTitle: {\n    position: \"relative\",\n    left: 10,\n    color: \"#fff\",\n    fontSize: 16\n  },\n  limitContainer: {\n    marginBottom: 70\n  }\n});","map":{"version":3,"names":["React","useEffect","useState","useNavigation","Feather","Icon","GameInfo","Loading","trackPromise","api","Footer","Search","navigation","searchString","setSearchString","searchTermChanged","setSearchTermChanged","selectedGames","setSelectedGames","offset","setOffset","delayDebounceFn","setTimeout","get","then","response","data","catch","err","console","log","toString","clearTimeout","tmp","result","concat","getMoreGames","increment","renderItem","item","String","id","styles","container","limitContainer","searchContainer","arrowIcon","goBack","searchInput","gamesContainer","StyleSheet","create","flex","backgroundColor","position","margin","width","height","left","top","borderColor","borderRadius","borderWidth","textAlign","color","fontSize","flexDirection","marginTop","text","paddingBottom","game","gameImage","gameTitle","marginBottom"],"sources":["C:/Users/Felipe/Documents/CCP/Projects/TracknPlay/mobile/src/pages/Search/index.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { Text, TextInput, StyleSheet, TouchableOpacity, Image, View, ScrollView, FlatList } from 'react-native';\r\nimport { useNavigation } from \"@react-navigation/native\";\r\nimport { Feather as Icon } from '@expo/vector-icons';\r\nimport GameInfo from '../../components/GameInfo';\r\nimport Loading from '../../components/Loading';\r\nimport { trackPromise } from 'react-promise-tracker';\r\n\r\nimport api from '../../services/api';\r\nimport Footer from '../../components/Footer';\r\n\r\ninterface Game {\r\n    id: number,\r\n    title: string,\r\n    imageUrl: string;\r\n    platforms: any[];\r\n};\r\n\r\nconst Search = () => {\r\n    const navigation = useNavigation();\r\n\r\n    const [searchString, setSearchString] = useState('');\r\n    const [searchTermChanged, setSearchTermChanged] = useState(false);\r\n    const [selectedGames, setSelectedGames] = useState<Game[]>([]);\r\n    const [offset, setOffset] = useState(0);\r\n\r\n    // quando altera a busca\r\n    useEffect(() => {\r\n        setOffset(0);\r\n        setSelectedGames([]);\r\n        const delayDebounceFn = setTimeout(() => {\r\n            if (searchString != \"\") {\r\n                setSearchTermChanged(true);\r\n                trackPromise(\r\n                    api.get<Game[]>(`/search?title=${searchString}&offset=${offset}`).then(response => {\r\n                        setSelectedGames(response.data);\r\n                        \r\n                    }).catch(err => {\r\n                        console.log(err.toString());\r\n                    }));\r\n            }\r\n        }, 2000)\r\n\r\n        return () => clearTimeout(delayDebounceFn)\r\n    }, [searchString]);\r\n\r\n    // buscando mais resultados\r\n    useEffect(() => {\r\n        // Send Axios request here\r\n        if (searchString != \"\" && offset > 0) {\r\n            setSearchTermChanged(false);\r\n            trackPromise(\r\n                api.get<Game[]>(`/search?title=${searchString}&offset=${offset}`).then(response => {\r\n                    let tmp = selectedGames;\r\n                    let result = tmp.concat(response.data);\r\n                    setSelectedGames(result);\r\n                }));\r\n        }\r\n    }, [offset]);\r\n\r\n    function getMoreGames() {\r\n        let increment = offset + 10;\r\n        setOffset(increment);\r\n    }\r\n\r\n    const renderItem = ({ item }) => {\r\n        return (\r\n            <GameInfo key={String(item.id)} game={item} isSearchPage={true}/>\r\n        );\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <View style={styles.container}>\r\n                <Loading searchTermChanged={searchTermChanged} />\r\n                <View style={styles.limitContainer}>\r\n\r\n\r\n\r\n                    <View style={styles.searchContainer}>\r\n                        <Icon name=\"arrow-left\" color=\"#FFF\" size={24} style={styles.arrowIcon} onPress={() => navigation.goBack()} />\r\n                        <TextInput\r\n                            style={styles.searchInput}\r\n                            placeholder=\"Buscar\"\r\n                            placeholderTextColor=\"#fff\" \r\n                            onChangeText={setSearchString}\r\n                            autoCompleteType=\"off\"\r\n                        />\r\n                    </View>\r\n\r\n                    <View style={styles.gamesContainer}>\r\n\r\n\r\n\r\n                        <FlatList\r\n                            data={selectedGames}\r\n                            renderItem={renderItem}\r\n                            keyExtractor={(item) => String(item.id)}\r\n                            onEndReachedThreshold={0.5}\r\n                            onEndReached={() => {\r\n                                getMoreGames();\r\n                            }}\r\n                            numColumns={1}\r\n                        />\r\n\r\n\r\n                    </View>\r\n                </View>\r\n                <Footer option='Search' />\r\n            </View>\r\n        </>\r\n    );\r\n};\r\n\r\nexport default Search;\r\n\r\nconst styles = StyleSheet.create({\r\n    container: {\r\n        flex: 1,\r\n        backgroundColor: '#000',\r\n    },\r\n\r\n    searchContainer: {\r\n        position: \"absolute\",\r\n        margin: 10,\r\n        width: 350,\r\n        height: 50,\r\n        left: 20,\r\n        top: 50,\r\n        backgroundColor: \"#000\",\r\n        borderColor: \"#696969\",\r\n        borderRadius: 10,\r\n        borderWidth: 2\r\n    },\r\n\r\n    searchInput: {\r\n        left: 40,\r\n        top: -12,\r\n        textAlign: \"left\",\r\n        color: \"#fff\",\r\n        fontSize: 18\r\n    },\r\n\r\n    arrowIcon: {\r\n        top: 12\r\n    },\r\n\r\n    gamesContainer: {\r\n        flexDirection: \"row\",\r\n        marginTop: 140,\r\n        left: 10\r\n        // marginLeft: 30\r\n    },\r\n\r\n    text: {\r\n        color: \"#fff\",\r\n        fontSize: 16,\r\n        left: 20,\r\n        paddingBottom: 10\r\n    },\r\n\r\n    game: {\r\n        height: 200,\r\n        width: 800\r\n    },\r\n\r\n    gameImage: {\r\n        marginTop: 10,\r\n        width: 120,\r\n        height: 170,\r\n        left: 29\r\n    },\r\n\r\n    gameTitle: {\r\n        position: \"relative\",\r\n        left: 10,\r\n        color: \"#fff\",\r\n        fontSize: 16\r\n    },\r\n\r\n    limitContainer: {\r\n        marginBottom: 70\r\n    }\r\n});"],"mappings":";;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;;;;;AAEA,SAASC,aAAT,QAA8B,0BAA9B;AACA,SAASC,OAAO,IAAIC,IAApB,QAAgC,oBAAhC;AACA,OAAOC,QAAP;AACA,OAAOC,OAAP;AACA,SAASC,YAAT,QAA6B,uBAA7B;AAEA,OAAOC,GAAP;AACA,OAAOC,MAAP;AAOC;;AAED,IAAMC,MAAM,GAAG,SAATA,MAAS,GAAM;EACjB,IAAMC,UAAU,GAAGT,aAAa,EAAhC;;EAEA,gBAAwCD,QAAQ,CAAC,EAAD,CAAhD;EAAA;EAAA,IAAOW,YAAP;EAAA,IAAqBC,eAArB;;EACA,iBAAkDZ,QAAQ,CAAC,KAAD,CAA1D;EAAA;EAAA,IAAOa,iBAAP;EAAA,IAA0BC,oBAA1B;;EACA,iBAA0Cd,QAAQ,CAAS,EAAT,CAAlD;EAAA;EAAA,IAAOe,aAAP;EAAA,IAAsBC,gBAAtB;;EACA,iBAA4BhB,QAAQ,CAAC,CAAD,CAApC;EAAA;EAAA,IAAOiB,MAAP;EAAA,IAAeC,SAAf;;EAGAnB,SAAS,CAAC,YAAM;IACZmB,SAAS,CAAC,CAAD,CAAT;IACAF,gBAAgB,CAAC,EAAD,CAAhB;IACA,IAAMG,eAAe,GAAGC,UAAU,CAAC,YAAM;MACrC,IAAIT,YAAY,IAAI,EAApB,EAAwB;QACpBG,oBAAoB,CAAC,IAAD,CAApB;QACAR,YAAY,CACRC,GAAG,CAACc,GAAJ,oBAAiCV,YAAjC,gBAAwDM,MAAxD,EAAkEK,IAAlE,CAAuE,UAAAC,QAAQ,EAAI;UAC/EP,gBAAgB,CAACO,QAAQ,CAACC,IAAV,CAAhB;QAEH,CAHD,EAGGC,KAHH,CAGS,UAAAC,GAAG,EAAI;UACZC,OAAO,CAACC,GAAR,CAAYF,GAAG,CAACG,QAAJ,EAAZ;QACH,CALD,CADQ,CAAZ;MAOH;IACJ,CAXiC,EAW/B,IAX+B,CAAlC;IAaA,OAAO;MAAA,OAAMC,YAAY,CAACX,eAAD,CAAlB;IAAA,CAAP;EACH,CAjBQ,EAiBN,CAACR,YAAD,CAjBM,CAAT;EAoBAZ,SAAS,CAAC,YAAM;IAEZ,IAAIY,YAAY,IAAI,EAAhB,IAAsBM,MAAM,GAAG,CAAnC,EAAsC;MAClCH,oBAAoB,CAAC,KAAD,CAApB;MACAR,YAAY,CACRC,GAAG,CAACc,GAAJ,oBAAiCV,YAAjC,gBAAwDM,MAAxD,EAAkEK,IAAlE,CAAuE,UAAAC,QAAQ,EAAI;QAC/E,IAAIQ,GAAG,GAAGhB,aAAV;QACA,IAAIiB,MAAM,GAAGD,GAAG,CAACE,MAAJ,CAAWV,QAAQ,CAACC,IAApB,CAAb;QACAR,gBAAgB,CAACgB,MAAD,CAAhB;MACH,CAJD,CADQ,CAAZ;IAMH;EACJ,CAXQ,EAWN,CAACf,MAAD,CAXM,CAAT;;EAaA,SAASiB,YAAT,GAAwB;IACpB,IAAIC,SAAS,GAAGlB,MAAM,GAAG,EAAzB;IACAC,SAAS,CAACiB,SAAD,CAAT;EACH;;EAED,IAAMC,UAAU,GAAG,SAAbA,UAAa,OAAc;IAAA,IAAXC,IAAW,QAAXA,IAAW;IAC7B,OACI,oBAAC,QAAD;MAAU,GAAG,EAAEC,MAAM,CAACD,IAAI,CAACE,EAAN,CAArB;MAAgC,IAAI,EAAEF,IAAtC;MAA4C,YAAY,EAAE,IAA1D;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,EADJ;EAGH,CAJD;;EAMA,OACI,0CACI,oBAAC,IAAD;IAAM,KAAK,EAAEG,MAAM,CAACC,SAApB;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,GACI,oBAAC,OAAD;IAAS,iBAAiB,EAAE5B,iBAA5B;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EADJ,EAEI,oBAAC,IAAD;IAAM,KAAK,EAAE2B,MAAM,CAACE,cAApB;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,GAII,oBAAC,IAAD;IAAM,KAAK,EAAEF,MAAM,CAACG,eAApB;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,GACI,oBAAC,IAAD;IAAM,IAAI,EAAC,YAAX;IAAwB,KAAK,EAAC,MAA9B;IAAqC,IAAI,EAAE,EAA3C;IAA+C,KAAK,EAAEH,MAAM,CAACI,SAA7D;IAAwE,OAAO,EAAE;MAAA,OAAMlC,UAAU,CAACmC,MAAX,EAAN;IAAA,CAAjF;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EADJ,EAEI,oBAAC,SAAD;IACI,KAAK,EAAEL,MAAM,CAACM,WADlB;IAEI,WAAW,EAAC,QAFhB;IAGI,oBAAoB,EAAC,MAHzB;IAII,YAAY,EAAElC,eAJlB;IAKI,gBAAgB,EAAC,KALrB;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EAFJ,CAJJ,EAeI,oBAAC,IAAD;IAAM,KAAK,EAAE4B,MAAM,CAACO,cAApB;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,GAII,oBAAC,QAAD;IACI,IAAI,EAAEhC,aADV;IAEI,UAAU,EAAEqB,UAFhB;IAGI,YAAY,EAAE,sBAACC,IAAD;MAAA,OAAUC,MAAM,CAACD,IAAI,CAACE,EAAN,CAAhB;IAAA,CAHlB;IAII,qBAAqB,EAAE,GAJ3B;IAKI,YAAY,EAAE,wBAAM;MAChBL,YAAY;IACf,CAPL;IAQI,UAAU,EAAE,CARhB;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EAJJ,CAfJ,CAFJ,EAmCI,oBAAC,MAAD;IAAQ,MAAM,EAAC,QAAf;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EAnCJ,CADJ,CADJ;AAyCH,CA9FD;;AAgGA,eAAezB,MAAf;AAEA,IAAM+B,MAAM,GAAGQ,UAAU,CAACC,MAAX,CAAkB;EAC7BR,SAAS,EAAE;IACPS,IAAI,EAAE,CADC;IAEPC,eAAe,EAAE;EAFV,CADkB;EAM7BR,eAAe,EAAE;IACbS,QAAQ,EAAE,UADG;IAEbC,MAAM,EAAE,EAFK;IAGbC,KAAK,EAAE,GAHM;IAIbC,MAAM,EAAE,EAJK;IAKbC,IAAI,EAAE,EALO;IAMbC,GAAG,EAAE,EANQ;IAObN,eAAe,EAAE,MAPJ;IAQbO,WAAW,EAAE,SARA;IASbC,YAAY,EAAE,EATD;IAUbC,WAAW,EAAE;EAVA,CANY;EAmB7Bd,WAAW,EAAE;IACTU,IAAI,EAAE,EADG;IAETC,GAAG,EAAE,CAAC,EAFG;IAGTI,SAAS,EAAE,MAHF;IAITC,KAAK,EAAE,MAJE;IAKTC,QAAQ,EAAE;EALD,CAnBgB;EA2B7BnB,SAAS,EAAE;IACPa,GAAG,EAAE;EADE,CA3BkB;EA+B7BV,cAAc,EAAE;IACZiB,aAAa,EAAE,KADH;IAEZC,SAAS,EAAE,GAFC;IAGZT,IAAI,EAAE;EAHM,CA/Ba;EAsC7BU,IAAI,EAAE;IACFJ,KAAK,EAAE,MADL;IAEFC,QAAQ,EAAE,EAFR;IAGFP,IAAI,EAAE,EAHJ;IAIFW,aAAa,EAAE;EAJb,CAtCuB;EA6C7BC,IAAI,EAAE;IACFb,MAAM,EAAE,GADN;IAEFD,KAAK,EAAE;EAFL,CA7CuB;EAkD7Be,SAAS,EAAE;IACPJ,SAAS,EAAE,EADJ;IAEPX,KAAK,EAAE,GAFA;IAGPC,MAAM,EAAE,GAHD;IAIPC,IAAI,EAAE;EAJC,CAlDkB;EAyD7Bc,SAAS,EAAE;IACPlB,QAAQ,EAAE,UADH;IAEPI,IAAI,EAAE,EAFC;IAGPM,KAAK,EAAE,MAHA;IAIPC,QAAQ,EAAE;EAJH,CAzDkB;EAgE7BrB,cAAc,EAAE;IACZ6B,YAAY,EAAE;EADF;AAhEa,CAAlB,CAAf"},"metadata":{},"sourceType":"module"}